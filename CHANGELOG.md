# Changelog

All notable changes to this project will be documented in this file.

## [Unreleased]

### Added
- RFC 051: added invoice preview/detail delivery with `app/Livewire/Invoices/Show.php` and `resources/views/pages/invoices/show.blade.php`, wired the new `invoices.show` route in `routes/web.php`, updated edit-flow gating through `app/Http/Controllers/Invoices/EditInvoiceController.php` and `resources/views/pages/invoices/edit.blade.php` so non-draft edit requests redirect to preview, and added feature coverage in `tests/Feature/Invoices/InvoicePreviewPageTest.php` plus edit restriction assertions in `tests/Feature/Invoices/InvoiceFormTest.php`; moved RFC tracking from `rfc/pending/07-invoicing/051-invoice-preview.md` to `rfc/completed/07-invoicing/051-invoice-preview.md`.
- RFC 013/101/102: moved pricing catalog routes to the settings namespace in `routes/settings.php` so products, plans, and tax rates are served under `/settings/pricing/*` while preserving existing route names (`pricing.products.*`, `pricing.plans.*`, `pricing.tax-rates.*`), removed duplicate pricing route declarations from `routes/web.php`, reorganized influencer navigation in `resources/views/layouts/app/sidebar.blade.php` and `resources/views/layouts/app/header.blade.php` to keep pricing grouped under Settings without adding a duplicate profile entry, and added coverage in `tests/Feature/Pricing/SettingsPricingRoutePrefixTest.php` with updated expectations in `tests/Feature/NavigationStructureTest.php`.
- RFC 050: added authenticated invoice create/edit routes in `routes/web.php` using a shared Livewire form component (`app/Livewire/Invoices/Form.php`) for both `/invoices/create` and `/invoices/{invoice}/edit`, and wired invoice list actions in `resources/views/pages/invoices/index.blade.php` to the new route names.
- RFC 050: added mixed-source invoice workflow with `app/Http/Requests/StoreInvoiceRequest.php`, `app/Services/Invoices/InvoiceService.php`, and `resources/views/pages/invoices/form.blade.php`, including dynamic line-item rows, product/plan/custom source selection, prefill behavior, mutual-exclusivity enforcement, and live subtotal/tax/total calculations.
- RFC 050: extended invoice item persistence for pricing-catalog sources by adding `catalog_product_id` and `catalog_plan_id` foreign keys in `database/migrations/2026_02_21_191500_add_catalog_source_columns_to_invoice_items_table.php`, relation/cast updates in `app/Models/InvoiceItem.php`, and builder/scoped-create support in `app/Builders/InvoiceItemBuilder.php`.
- RFC 050: added coverage in `tests/Feature/Invoices/InvoiceFormTest.php` and `tests/Feature/Builders/InvoiceItemBuilderTest.php` for shared create/edit form rendering, mixed-source invoice persistence, validation/authorization boundaries, and invoice item builder scopes/helpers.
- RFC 071: added custom standalone error pages in `resources/views/errors/403.blade.php`, `resources/views/errors/404.blade.php`, `resources/views/errors/500.blade.php`, and `resources/views/errors/503.blade.php` with RFC-compliant messaging and dashboard recovery actions.
- RFC 071: expanded exception handling and monitoring configuration with dedicated report hooks in `bootstrap/app.php`, contextual exception constructors in `app/Exceptions/InstagramApiException.php` and new `app/Exceptions/StripeException.php`, per-integration logging channels in `config/logging.php`, and Horizon long-wait mail routing in `app/Providers/HorizonServiceProvider.php`.
- RFC 071: strengthened queue monitoring setup in `config/horizon.php` with a dedicated `instagram-sync` supervisor profile (`tries=3`, `timeout=120`) and added feature coverage in `tests/Feature/Infrastructure/ErrorHandlingAndMonitoringTest.php` (8 tests) plus targeted regression runs for Instagram job flows.
- RFC 072: hardened sensitive endpoint throttling by adding `instagram-oauth-callback` (10/min/IP) and `stripe-webhooks` (60/min/IP) limiter profiles in `app/Providers/FortifyServiceProvider.php`, applying callback throttling on `auth.facebook.callback` in `routes/web.php`, and adding feature coverage in `tests/Feature/Auth/FacebookSocialiteLoginTest.php` and `tests/Feature/Security/RateLimitingTest.php`.
- RFC 072: tightened security input boundaries by adding max-length validation to portal login and revision notes (`app/Http/Requests/Portal/PortalLoginRequest.php`, `app/Livewire/Portal/Proposals/Show.php`, `app/Services/Proposals/ProposalWorkflowService.php`) and by adding `StoreCatalogPlanRequest` description length limits in `app/Http/Requests/StoreCatalogPlanRequest.php` with coverage in `tests/Feature/Portal/PortalProposalsTest.php`.
- RFC 072: standardized model mass-assignment defaults to `protected $guarded = [];` on `app/Models/User.php` and `app/Models/ClientUser.php`, and made proposal markdown rendering explicitly XSS-safe using `Str::markdown(..., ['html_input' => 'strip', 'allow_unsafe_links' => false])` in `resources/views/pages/proposals/show.blade.php`, `resources/views/pages/portal/proposals/show.blade.php`, and `resources/views/pages/proposals/edit.blade.php` with sanitization coverage in `tests/Feature/Proposals/ProposalPreviewPageTest.php`.
- RFC 073: added comprehensive deployment operations documentation in `docs/deployment.md`, covering server prerequisites, environment variable catalog, production deployment steps, Horizon/Supervisor setup, scheduler cron configuration, Meta app review checklist, and Stripe webhook setup.
- RFC 073: expanded `.env.example` with grouped deployment-focused variable documentation and added missing integration keys (`META_CLIENT_ID`, `META_CLIENT_SECRET`, `META_REDIRECT_URI`, `STRIPE_KEY`, `STRIPE_SECRET`, `STRIPE_WEBHOOK_SECRET`) while clarifying Redis-backed queue/session production guidance.
- RFC 069: completed responsive layout pass across influencer and client-portal surfaces with mobile card fallbacks for table-heavy pages (`resources/views/pages/clients/index.blade.php`, `resources/views/pages/proposals/index.blade.php`, `resources/views/pages/invoices/index.blade.php`, `resources/views/pages/portal/proposals/index.blade.php`, `resources/views/pages/portal/analytics/index.blade.php`) while preserving desktop table rendering and intended table scroll fallback.
- RFC 069: improved small-screen behavior in content and proposal workflows by updating content gallery breakpoints and modal sizing in `resources/views/pages/content/index.blade.php`, plus mobile scheduled-post card rendering in `resources/views/pages/proposals/show.blade.php` and `resources/views/pages/portal/proposals/show.blade.php`.
- RFC 069: fixed responsive form/control constraints and touch-target sizing in `resources/views/pages/analytics/index.blade.php`, `resources/views/pages/instagram-accounts/index.blade.php`, and `resources/views/pages/auth/login.blade.php` to reduce narrow-screen overflow and keep key controls mobile-friendly.
- RFC 069: added responsive coverage assertions in `tests/Feature/Clients/ClientListPageTest.php`, `tests/Feature/Proposals/ProposalListPageTest.php`, `tests/Feature/Invoices/InvoiceListPageTest.php`, `tests/Feature/Portal/PortalProposalsTest.php`, and `tests/Feature/Content/ContentGalleryPageTest.php`; validated with targeted feature suite execution (`59` tests passing).
- RFC 102: added influencer pricing plan CRUD routes in `routes/web.php` (`pricing.plans.index|create|edit`), Livewire pages `app/Livewire/Pricing/Plans/Index.php` and shared create/edit form page `app/Livewire/Pricing/Plans/Form.php`, plus Flux-based plan UI templates in `resources/views/pages/pricing/plans/`.
- RFC 102: implemented plan composition workflow abstractions with `app/Http/Requests/StoreCatalogPlanRequest.php` validation and `app/Services/Catalog/CatalogPlanService.php` transactional nested-item persistence; extended query composition in `app/Builders/CatalogPlanBuilder.php` (`search`, `filterByActive`, `withItemsCount`, `applySort`) and added enum-backed filter/sort metadata in `app/Enums/CatalogPlanStatusFilter.php` and `app/Enums/CatalogPlanSort.php`.
- RFC 102: updated influencer navigation in `resources/views/layouts/app/sidebar.blade.php` to include pricing products/plans links and added coverage in `tests/Feature/Pricing/CatalogPlanCrudTest.php`, `tests/Feature/Builders/PricingCatalogBuildersTest.php`, `tests/Feature/NavigationStructureTest.php`, and `tests/Unit/EnumsTest.php`; validated with targeted test runs (`61` tests passing).
- RFC 075: added TikTok Socialite service configuration in `config/services.php` and environment placeholders in `.env.example` for `TIKTOK_CLIENT_ID`, `TIKTOK_CLIENT_SECRET`, and `TIKTOK_REDIRECT_URI`.
- RFC 075: installed `socialiteproviders/tiktok` (with `socialiteproviders/manager`) and registered TikTok provider listener wiring in `app/Providers/AppServiceProvider.php` so `Socialite::driver('tiktok')` resolves.
- RFC 075: added feature coverage in `tests/Feature/Auth/TikTokSocialiteConfigurationTest.php` and validated existing Instagram/client auth flows with targeted auth test execution.
- RFC 101: added influencer pricing product CRUD surface with authenticated routes in `routes/web.php`, new Livewire pages `app/Livewire/Pricing/Products/Index.php`, `app/Livewire/Pricing/Products/Create.php`, `app/Livewire/Pricing/Products/Edit.php`, and Flux-based page templates under `resources/views/pages/pricing/products/`.
- RFC 101: added pricing product workflow abstractions via `app/Http/Requests/StoreCatalogProductRequest.php` and `app/Services/Catalog/CatalogProductService.php`, plus builder/query enhancements in `app/Builders/CatalogProductBuilder.php` (`search`, `filterByPlatform`, `filterByActive`, `applySort`) and enum-backed filter/sort metadata in `app/Enums/CatalogProductStatusFilter.php` and `app/Enums/CatalogProductSort.php`.
- RFC 101: added pricing navigation links in `resources/views/layouts/app/sidebar.blade.php` and `resources/views/layouts/app/header.blade.php`, extended enum support with `MediaType::values()` in `app/Enums/MediaType.php`, and added coverage in `tests/Feature/Pricing/CatalogProductCrudTest.php`, `tests/Feature/Builders/PricingCatalogBuildersTest.php`, `tests/Feature/NavigationStructureTest.php`, and `tests/Unit/EnumsTest.php`.
- RFC 100: added pricing catalog enums `app/Enums/PlatformType.php`, `app/Enums/CatalogSourceType.php`, and `app/Enums/BillingUnitType.php` with reusable `values()` and `label()` metadata for validation/UI.
- RFC 100: added pricing catalog schema in `database/migrations/2026_02_17_130000_create_pricing_catalog_tables.php` for `catalog_products`, `catalog_plans`, `catalog_plan_items`, and `proposal_line_items` with required ownership and pricing snapshot columns.
- RFC 100: implemented pricing catalog and proposal line-item domain layers with typed builders/models/factories/policies in `app/Builders/`, `app/Models/`, `database/factories/`, and `app/Policies/`, including `User::catalogProducts()`, `User::catalogPlans()`, and `Proposal::lineItems()` relationships.
- RFC 100: added test coverage in `tests/Unit/EnumsTest.php`, `tests/Feature/Models/PricingCatalogTest.php`, `tests/Feature/Builders/PricingCatalogBuildersTest.php`, and `tests/Feature/Authorization/ModelPoliciesTest.php`; validated with a full `php artisan test` run (`348` tests passing in `19.41s`).
- RFC 068: verified comprehensive Livewire feature-test coverage across implemented pages/workflows and validated acceptance criteria with a full `php artisan test` run (`334` tests passing in `18.88s` total).
- RFC 066: added client-portal analytics route wiring in `routes/portal.php`, new Livewire page `app/Livewire/Portal/Analytics/Index.php`, and portal sidebar navigation update in `resources/views/layouts/portal/sidebar.blade.php`.
- RFC 066: implemented client-scoped audience demographics aggregation in `app/Services/Clients/ClientAudienceDemographicsService.php` and added `resources/views/pages/portal/analytics/index.blade.php` with campaign summary cards, engagement trend chart, campaign breakdown table, and demographics visualizations/empty states.
- RFC 066: added feature coverage in `tests/Feature/Portal/PortalAnalyticsTest.php` for auth guard protection, strict client data scoping, and no-linked-content empty state; updated `tests/Feature/Portal/PortalLayoutTest.php` to assert analytics navigation wiring.
- RFC 065: expanded audience demographics query composition in `app/Builders/AudienceDemographicBuilder.php` with reusable influencer ownership/account filters and typed demographic helpers for analytics data loading.
- RFC 065: extended `app/Livewire/Analytics/Index.php` to prepare audience demographics datasets (age distribution, gender totals, top cities, top countries), apply account scoping, and expose RFC-compliant empty-state readiness.
- RFC 065: added an "Audience Demographics" analytics section in `resources/views/pages/analytics/index.blade.php` with a 2x2 chart grid (age bar, gender doughnut with center label, top cities horizontal bars, top countries horizontal bars) and required sync/follower-threshold empty-state messaging.
- RFC 065: expanded `tests/Feature/Analytics/AnalyticsDashboardOverviewTest.php` with feature coverage for demographics dataset rendering, top-10 truncation, account-filter behavior, ownership scoping, and empty-state visibility.
- RFC 064: added client analytics aggregation service `app/Services/Clients/ClientAnalyticsService.php` to compute linked-content summary metrics, per-post engagement trend series, campaign-level breakdown rows, and client-vs-account engagement comparisons for client detail analytics.
- RFC 064: extended query-layer helpers in `app/Builders/InstagramMediaBuilder.php` and `app/Builders/CampaignBuilder.php` to support scoped analytics data loading and reusable metric-focused relation queries.
- RFC 064: replaced the client detail analytics placeholder in `resources/views/pages/clients/show.blade.php` and `app/Livewire/Clients/Show.php` with live analytics UI (summary cards, Chart.js performance-over-time line chart, campaign breakdown table, comparison bars, and empty state) on `/clients/{client}`.
- RFC 064: expanded feature coverage in `tests/Feature/Clients/ClientDetailPageTest.php` for analytics tab aggregation accuracy, campaign breakdown rendering, trend payload generation, account-average comparison, and empty-state behavior.
- RFC 063: enhanced content detail analytics in `app/Livewire/Content/Index.php` and `app/Builders/InstagramMediaBuilder.php` with 90-day account-average metric aggregation and per-metric comparison payloads for likes, comments, reach, and engagement rate.
- RFC 063: updated `resources/views/pages/content/index.blade.php` to display per-post performance comparisons with clear up/down/flat indicators and campaign context messaging (`client`, `campaign`, and "part of campaign with X other posts") in the detail modal.
- RFC 063: expanded `tests/Feature/Content/ContentGalleryPageTest.php` with feature coverage validating 90-day comparison calculations, exclusion of out-of-window posts from averages, and campaign context rendering.
- RFC 062: added query-layer content-type aggregation in `app/Builders/InstagramMediaBuilder.php` via `contentTypeBreakdown()` to return per-type counts plus average engagement/reach with influencer ownership, account, and period scopes applied upstream.
- RFC 062: extended analytics state in `app/Livewire/Analytics/Index.php` with typed breakdown chart payloads and summary integration, and added enum UI metadata in `app/Enums/MediaType.php` (`pluralLabel()` and `chartColor()`) to keep content-type presentation logic centralized.
- RFC 062: replaced the analytics content-type placeholder in `resources/views/pages/analytics/index.blade.php` with a Chart.js + Alpine doughnut chart (Posts/Reels/Stories color mapping), center total, legend counts/percentages, per-type average engagement/reach stats, and empty-state handling.
- RFC 062: added feature coverage in `tests/Feature/Analytics/AnalyticsDashboardOverviewTest.php` for breakdown calculations and period/account filter responsiveness, and expanded enum metadata coverage in `tests/Unit/EnumsTest.php`.
- RFC 061: added best-performing content sorting enum `app/Enums/AnalyticsTopContentSort.php` and query-layer ranking helper `topPerforming(...)` in `app/Builders/InstagramMediaBuilder.php` to support engagement/reach ranking with deterministic ordering.
- RFC 061: extended analytics page state/data in `app/Livewire/Analytics/Index.php` with top-content sort toggling and a filtered/scoped top 5 media query honoring influencer ownership, selected period, and selected account.
- RFC 061: replaced the analytics placeholder card in `resources/views/pages/analytics/index.blade.php` with a full "Best Performing Content" section including sort toggle controls, media thumbnails, caption previews, media-type badges, publish date, metrics, and content detail links.
- RFC 061: added coverage in `tests/Feature/Analytics/AnalyticsDashboardOverviewTest.php` for ordering, sort switching, period/account scoping, and detail link rendering; expanded `tests/Unit/EnumsTest.php` for analytics top-content sort and media badge/label enum metadata.
- RFC 060: implemented engagement trend chart aggregation in `app/Builders/InstagramMediaBuilder.php` and wired analytics chart data in `app/Livewire/Analytics/Index.php` with period-aware day/week/month bucketing plus overall average reference-line data.
- RFC 060: replaced the `/analytics` engagement placeholder with a rendered Chart.js + Alpine line chart in `resources/views/pages/analytics/index.blade.php`, including filtered empty-state handling and average-rate display.
- RFC 060: added Chart.js frontend integration in `resources/js/app.js` and `package.json` (`chart.js` dependency with updated `yarn.lock`).
- RFC 060: expanded feature coverage in `tests/Feature/Analytics/AnalyticsDashboardOverviewTest.php` to verify engagement trend aggregation across 30-day (daily), 90-day (weekly), and all-time (monthly) windows with account scoping.
- RFC 059: added follower snapshot persistence with `app/Models/FollowerSnapshot.php`, `app/Builders/FollowerSnapshotBuilder.php`, `database/migrations/2026_02_17_092134_create_follower_snapshots_table.php`, and `database/factories/FollowerSnapshotFactory.php`, plus `InstagramAccount::followerSnapshots()` relationship support in `app/Models/InstagramAccount.php`.
- RFC 059: implemented `App\Jobs\RecordFollowerSnapshot` and daily scheduler wiring in `routes/console.php` (`record-follower-snapshots`) to capture follower counts per connected Instagram account for analytics trend history.
- RFC 059: replaced the analytics audience-growth placeholder with a Chart.js line chart in `resources/views/pages/analytics/index.blade.php`, importing Chart.js and chart bootstrap logic in `resources/js/app.js`, with chart data prepared in `app/Livewire/Analytics/Index.php` and scoped to selected period/account filters.
- RFC 059: added feature coverage for chart data preparation/filter behavior in `tests/Feature/Analytics/AnalyticsDashboardOverviewTest.php`, snapshot job behavior in `tests/Feature/Jobs/RecordFollowerSnapshotTest.php`, and scheduler registration/dispatch in `tests/Feature/Console/InstagramSyncSchedulingTest.php`.
- RFC 058: added authenticated influencer analytics overview route `analytics.index` in `routes/web.php` backed by new Livewire page `app/Livewire/Analytics/Index.php` and view `resources/views/pages/analytics/index.blade.php`.
- RFC 058: implemented analytics period filtering via new enum `app/Enums/AnalyticsPeriod.php` and query-layer aggregation helpers in `app/Builders/InstagramMediaBuilder.php` and `app/Builders/InstagramAccountBuilder.php` for scoped account/period metrics.
- RFC 058: added analytics overview cards (total followers, total posts with post/reel/story breakdown, average engagement rate, total reach with compact formatting), account filtering, period selector controls, and chart placeholder sections on `/analytics`.
- RFC 058: updated influencer analytics navigation links in `resources/views/layouts/app/sidebar.blade.php` and `resources/views/layouts/app/header.blade.php`.
- RFC 058: added feature coverage in `tests/Feature/Analytics/AnalyticsDashboardOverviewTest.php` and updated navigation assertions in `tests/Feature/NavigationStructureTest.php`.
- RFC 049: added authenticated influencer invoice index route in `routes/web.php` and implemented `app/Livewire/Invoices/Index.php` with authorization, query-layer status/client filtering, paginated scoped listing, draft-only delete action, and summary metrics for outstanding totals, paid-this-month totals, and overdue count.
- RFC 049: added invoice list page `resources/views/pages/invoices/index.blade.php` with summary cards, status/client filters, RFC-compliant status badges and due-date overdue highlighting, invoice/actions table, and empty state messaging.
- RFC 049: extended invoice query/filter enum infrastructure in `app/Builders/InvoiceBuilder.php` and `app/Enums/InvoiceStatus.php`, added `User::resolveInvoice()` in `app/Models/User.php`, and updated influencer sidebar invoice navigation in `resources/views/layouts/app/sidebar.blade.php`.
- RFC 049: added feature coverage in `tests/Feature/Invoices/InvoiceListPageTest.php`, updated `tests/Feature/NavigationStructureTest.php` for invoices route assertions, and expanded `tests/Unit/EnumsTest.php` for invoice filter option methods.
- RFC 048: added client response workflow methods in `app/Services/Proposals/ProposalWorkflowService.php` for approve/request-changes actions with sent-only status gating, already-responded protection, client ownership enforcement, and influencer email dispatch.
- RFC 048: added proposal response notification mailables `app/Mail/ProposalApproved.php` and `app/Mail/ProposalRevisionRequested.php` with templates `resources/views/mail/proposal-approved.blade.php` and `resources/views/mail/proposal-revision-requested.blade.php`.
- RFC 048: updated `app/Livewire/Portal/Proposals/Show.php` and `resources/views/pages/portal/proposals/show.blade.php` to enable actionable Approve/Request Changes flows (including revision-notes modal), response-state UI gating, and flash/error messaging; expanded `tests/Feature/Portal/PortalProposalsTest.php` to cover approve, request changes, validation, non-replay constraints, and email delivery.
- RFC 047: added client-portal proposal browsing routes in `routes/portal.php` for `/portal/proposals` and `/portal/proposals/{proposal}` backed by new Livewire pages `app/Livewire/Portal/Proposals/Index.php` and `app/Livewire/Portal/Proposals/Show.php`.
- RFC 047: added `resources/views/pages/portal/proposals/index.blade.php` and `resources/views/pages/portal/proposals/show.blade.php` with client-scoped sent/approved/rejected/revised proposal listing, query-layer status filtering, markdown proposal rendering, campaign schedule context, and placeholder approve/request-change actions for RFC 048.
- RFC 047: updated portal navigation link wiring in `resources/views/layouts/portal/sidebar.blade.php` and added feature coverage in `tests/Feature/Portal/PortalProposalsTest.php` plus portal nav assertion update in `tests/Feature/Portal/PortalLayoutTest.php` for scope, authorization, and draft access denial.
- RFC 046: implemented proposal send workflow in `app/Services/Proposals/ProposalWorkflowService.php` with send-time validation for client email, status eligibility, linked campaign requirements, scheduled-content presence, and influencer/client scope enforcement before mutating proposal state.
- RFC 046: wired send confirmation and execution in `app/Livewire/Proposals/Show.php` and `resources/views/pages/proposals/show.blade.php`, including a confirmation modal, actionable validation error messaging, and success flash feedback after send.
- RFC 046: added proposal notification mailer `app/Mail/ProposalSent.php` and template `resources/views/mail/proposal-sent.blade.php` with proposal title/preview, influencer attribution, client-portal CTA when portal access exists, and influencer reply-to support.
- RFC 046: added feature coverage in `tests/Feature/Proposals/ProposalSendWorkflowTest.php` for draft/revised send success and validation failure paths; updated proposal send policy coverage in `tests/Feature/Authorization/ModelPoliciesTest.php`.
- RFC 044: added authenticated proposal create/edit flows via `app/Livewire/Proposals/Create.php`, `app/Livewire/Proposals/Edit.php`, `resources/views/pages/proposals/create.blade.php`, and `resources/views/pages/proposals/edit.blade.php` with markdown preview toggle, campaign builder, per-campaign scheduled content builder, status-aware read-only mode, duplicate workflow, and edit-page delete confirmation.
- RFC 044: added `app/Http/Requests/StoreProposalRequest.php` and `app/Services/Proposals/ProposalWorkflowService.php` to enforce scoped validation (client/campaign/account ownership), proposal draft workflow orchestration, campaign linking/creation, scheduled content sync, and proposal duplication.
- RFC 044: wired create/edit proposal routes in `routes/web.php`, updated proposal list actions in `resources/views/pages/proposals/index.blade.php` to navigate to create/edit pages, and enforced draft/revised-only proposal updates in `app/Policies/ProposalPolicy.php`.
- RFC 044: added feature coverage in `tests/Feature/Proposals/ProposalCreateEditPageTest.php` for create/edit/validation/authorization/preview/readonly/duplicate/delete behaviors and expanded related policy/list assertions in `tests/Feature/Authorization/ModelPoliciesTest.php` and `tests/Feature/Proposals/ProposalListPageTest.php`.
- RFC 043: added authenticated `/proposals` list page via `app/Livewire/Proposals/Index.php` and `resources/views/pages/proposals/index.blade.php` with query-layer status and client filtering, campaign count and scheduled content count subquery, status color badges (Draft=gray, Sent=blue, Approved=green, Rejected=red, Revised=amber), draft/revised edit actions, delete confirmation modal, pagination, and empty state.
- RFC 043: wired proposals route in `routes/web.php` and updated navigation links in `resources/views/layouts/app/sidebar.blade.php` and `resources/views/layouts/app/header.blade.php` to point to `proposals.index` with active-state handling.
- RFC 043: added feature coverage in `tests/Feature/Proposals/ProposalListPageTest.php` for ownership scoping, status/client filtering, campaign/scheduled-content counts, badge colors, pagination, empty state, draft-only edit visibility, delete workflow, and sidebar link assertion. Updated `tests/Feature/NavigationStructureTest.php` for proposals route assertion.
- RFC 042: added authenticated `/schedule` timeline route via `app/Livewire/Schedule/Index.php` and `resources/views/pages/schedule/index.blade.php` with query-layer filtering (status/client/account/campaign/media-type/date), day-grouped chronological rendering, CRUD modal workflows, status transitions, proposal-context badges, and delete confirmation.
- RFC 042: added `app/Http/Requests/StoreScheduledPostRequest.php`, `database/migrations/2026_02_15_120000_add_campaign_and_media_type_to_scheduled_posts_table.php`, and scheduled-post campaign/media-type model support in `app/Models/ScheduledPost.php`, `app/Models/Campaign.php`, and `database/factories/ScheduledPostFactory.php`.
- RFC 042: wired schedule navigation in `routes/web.php`, `resources/views/layouts/app/sidebar.blade.php`, and `resources/views/layouts/app/header.blade.php`, and added feature coverage in `tests/Feature/Content/ScheduleTimelinePageTest.php` with navigation assertion updates in `tests/Feature/NavigationStructureTest.php`.
- RFC 095: added campaign lifecycle management to `app/Livewire/Clients/Show.php` and `resources/views/pages/clients/show.blade.php` with client-scoped create/edit/delete actions, optional proposal link/unlink support, validation, authorization checks, and modal confirmation flows.
- RFC 095: added dedicated campaigns-tab coverage in `tests/Feature/Clients/ClientDetailPageTest.php` for campaign CRUD behavior, client-scoped proposal validation, and empty-state rendering.
- RFC 096: refactored content linking to require `campaign_id` in `app/Livewire/Content/Index.php` and `resources/views/pages/content/index.blade.php` for both single and batch workflows, replacing free-text campaign naming with scoped campaign selection.
- RFC 096: added inline campaign creation in the content linking modal and updated `app/Services/Content/ContentClientLinkService.php` to link media through explicit `Campaign` entities with ownership checks.
- RFC 096: updated coverage in `tests/Feature/Content/ContentGalleryPageTest.php` and `tests/Feature/Services/ContentClientLinkServiceTest.php` for campaign-id linking, inline campaign creation, batch linking, and authorization boundaries.
- RFC 097: updated client content grouping in `app/Livewire/Clients/Show.php` and `resources/views/pages/clients/show.blade.php` to group linked media by campaign entities (campaign ID/name) with per-campaign aggregate post/reach totals and uncategorized fallback support.
- RFC 097: expanded `tests/Feature/Clients/ClientDetailPageTest.php` to verify campaign-entity grouping behavior, aggregate stats correctness, and existing unlink behavior continuity.
- RFC 093: added first-class campaign domain support with `app/Models/Campaign.php`, `database/migrations/2026_02_14_200000_create_campaigns_table.php`, `database/factories/CampaignFactory.php`, `app/Policies/CampaignPolicy.php`, and reverse relationships in `app/Models/Client.php`/`app/Models/Proposal.php`.
- RFC 093: expanded authorization coverage in `tests/Feature/Authorization/ModelPoliciesTest.php` and added dedicated campaign model coverage in `tests/Feature/Models/CampaignTest.php`.
- RFC 094: refactored `campaign_media` to campaign-owned links via `database/migrations/2026_02_14_200100_refactor_campaign_media_table.php`, updated `app/Models/InstagramMedia.php` and `app/Services/Content/ContentClientLinkService.php` to use `campaign_id + instagram_media_id`, and removed pivot `campaign_name` dependency.
- RFC 094: updated content/client/portal workflows to read campaign entities instead of pivot text (`app/Livewire/Content/Index.php`, `resources/views/pages/content/index.blade.php`, `app/Livewire/Clients/Show.php`, `app/Livewire/Clients/Index.php`, `resources/views/pages/clients/index.blade.php`, `app/Livewire/Portal/Dashboard.php`) with updated feature/model/service tests for duplicate prevention and unlink behavior.
- RFC 037: added `App\Livewire\Portal\Dashboard` and updated `routes/portal.php` to serve `/portal/dashboard` as a client-guarded Livewire page with scoped metrics and recent activity data.
- RFC 037: replaced `resources/views/pages/portal/dashboard.blade.php` placeholder content with a summary dashboard (active proposals, pending invoices total, linked content, total reach) and recent proposals/invoices lists with status badges and placeholder detail links.
- RFC 037: added feature coverage in `tests/Feature/Portal/PortalDashboardTest.php` and updated `tests/Feature/Portal/PortalLayoutTest.php` for dashboard rendering updates and strict client data scoping.
- RFC 036: added `App\Services\Clients\ClientPortalAccessService` and `App\Mail\ClientPortalInvitation` with `resources/views/mail/client-portal-invitation.blade.php` to handle portal invite creation, temporary credentials, welcome email delivery, and revoke workflows.
- RFC 036: extended `App\Livewire\Clients\Show` and `resources/views/pages/clients/show.blade.php` with invite/revoke portal actions, validation/error states, and status-aware portal access controls.
- RFC 036: added feature coverage in `tests/Feature/Clients/ClientPortalAccessTest.php` for invite success, no-email guardrails, invitation email content, revoke behavior, and portal-status UI rendering.
- RFC 035: added dedicated portal layout templates `resources/views/layouts/portal.blade.php` and `resources/views/layouts/portal/sidebar.blade.php` with client-portal branding, simplified navigation, and client-user logout menu controls.
- RFC 035: added `resources/views/pages/portal/dashboard.blade.php` placeholder on the new portal layout and wired `/portal/dashboard` in `routes/portal.php` behind a dedicated `client.auth` middleware alias that enforces the client guard and redirects guests to `/portal/login`.
- RFC 035: added feature coverage in `tests/Feature/Portal/PortalLayoutTest.php` for client-guard access control, portal layout rendering, and logout behavior.
- RFC 034: added `/clients/{client}` via `App\Livewire\Clients\Show` and `resources/views/pages/clients/show.blade.php` with owner-scoped client overview, portal-access status display, edit navigation, and tabbed placeholder sections.
- RFC 034: updated clients list/detail wiring so “View” uses `clients.show` and edit saves redirect back to the client detail page.
- RFC 034: added feature coverage in `tests/Feature/Clients/ClientDetailPageTest.php` for authorized rendering, forbidden access for non-owners, tab placeholder visibility, and summary metric display.
- RFC 033: added `/clients/{client}/edit` via `App\Livewire\Clients\Edit` and `resources/views/pages/clients/edit.blade.php` with owner-only prefilled editing, validation-backed updates, and a modal-confirmed delete action.
- RFC 033: added `app/Http/Requests/UpdateClientRequest.php` and connected it to Livewire update validation while preserving client ownership authorization checks.
- RFC 033: added feature coverage in `tests/Feature/Clients/ClientEditPageTest.php` for authorized rendering, unauthorized access denial, update validation/persistence, and cascade delete behavior for related proposals and invoices.
- RFC 032: added `/clients/create` Livewire page via `App\Livewire\Clients\Create` and `resources/views/pages/clients/create.blade.php` with Flux form fields for full client profile capture and cancel/save actions.
- RFC 032: added `app/Http/Requests/StoreClientRequest.php` and integrated its validation rules into the create workflow so new clients are created under the authenticated influencer only.
- RFC 032: added feature coverage in `tests/Feature/Clients/ClientCreatePageTest.php` for page rendering, successful creation/redirect flow, and invalid payload validation failures.
- RFC 031: added `App\Livewire\Clients\Index`, `resources/views/pages/clients/index.blade.php`, and `routes/web.php` wiring for authenticated `/clients` with query-level search/type filtering, pagination, empty state messaging, and row actions.
- RFC 031: updated `resources/views/layouts/app/sidebar.blade.php` to route the Clients nav item to `clients.index` with active-state handling.
- RFC 031: added feature coverage in `tests/Feature/Clients/ClientListPageTest.php` and updated `tests/Feature/NavigationStructureTest.php` for scoped listing, search/filter behavior, pagination, empty state rendering, and navigation link assertions.
- RFC 030: added manual account sync action `syncNow` to `app/Livewire/InstagramAccounts/Index.php` with ownership authorization, duplicate-sync guard, immediate `sync_status=syncing` UI feedback, and queued `App\Jobs\SyncAllInstagramData` dispatch.
- RFC 030: updated `resources/views/pages/instagram-accounts/index.blade.php` with per-account "Sync Now" controls (disabled while syncing), `wire:poll.5s` status refresh while syncing, RFC-compliant status copy ("Up to date", "Syncing...", "Sync failed"), failed-sync collapsible `last_sync_error` display, and expiring/expired token "Re-authenticate" links.
- RFC 030: expanded `tests/Feature/InstagramAccountsPageTest.php` to verify manual sync dispatch and syncing-state persistence, skip-dispatch when already syncing, failed-sync error rendering, and polling/status text visibility on the accounts page.
- RFC 029: added authenticated add-account OAuth entry route `auth.facebook.add` and callback intent branching in `app/Http/Controllers/Auth/SocialAuthController.php` so account linking uses `createInstagramAccountsForLoggedUser()` and redirects back to `/instagram-accounts` with scoped success/error handling.
- RFC 029: expanded `/instagram-accounts` in `app/Livewire/InstagramAccounts/Index.php` and `resources/views/pages/instagram-accounts/index.blade.php` with "Connect Another Account", `setPrimary` action, disconnect confirmation modal flow, ownership-safe account resolution, and last-account disconnect guard messaging.
- RFC 029: added feature coverage in `tests/Feature/Auth/FacebookSocialiteLoginTest.php` and `tests/Feature/InstagramAccountsPageTest.php` for add-account auth flow, callback account-linking behavior, primary-account switching, disconnect confirmation, and prevention of disconnecting the final account.
- RFC 027: added `App\Jobs\SyncAllInstagramData` queued orchestrator on the `instagram-sync` queue to run profile, media, insights, stories, and audience demographics syncs in sequence, set account status to `syncing`, mark failures with `last_sync_error`, and finalize successful runs by setting `sync_status=idle`, clearing errors, and updating `last_synced_at`.
- RFC 027: added Instagram scheduler cadence in `routes/console.php` with named tasks for full account sync every 6 hours (`sync-all-instagram`), hourly profile+insights refresh (`refresh-instagram-insights`), and daily token refresh dispatch for accounts expiring within 7 days (`refresh-instagram-tokens`).
- RFC 027: updated `config/horizon.php` to include the `instagram-sync` queue in worker defaults and added a dedicated queue wait threshold for `redis:instagram-sync`.
- RFC 027: added feature coverage in `tests/Feature/Jobs/SyncAllInstagramDataTest.php` and `tests/Feature/Console/InstagramSyncSchedulingTest.php` for orchestrator success/failure behavior, ordered sync execution, queue settings, and scheduler cron registration.
- RFC 028: added `App\Livewire\InstagramAccounts\Index` and `resources/views/pages/instagram-accounts/index.blade.php` to deliver the authenticated `/instagram-accounts` list page with account avatars, username/type/primary badges, follower and media counts, sync status indicators, relative last sync time, token active/expired/expiring-soon states, and an empty-state CTA placeholder.
- RFC 028: added route wiring in `routes/web.php` (`instagram-accounts.index`), updated influencer navigation links in `resources/views/layouts/app/sidebar.blade.php` and `resources/views/layouts/app/header.blade.php` to point to the new page with active-state support, and added feature coverage in `tests/Feature/InstagramAccountsPageTest.php` plus navigation assertion updates in `tests/Feature/NavigationStructureTest.php`.
- RFC 026: added `App\Jobs\RefreshInstagramToken` queued job with `instagram-sync` queue configuration (`tries=3`, `backoff=[60,300,900]`) and token refresh persistence for `InstagramAccount`.
- RFC 026: added token refresh handling in `app/Services/Facebook/InstagramGraphService.php` with typed exception mapping and strict validation for refresh responses that must include `access_token`.
- RFC 026: added feature coverage in `tests/Feature/Jobs/RefreshInstagramTokenTest.php` for successful token refresh persistence, already-expired token handling, expired-token API responses, retryable API failure propagation, and queue/backoff configuration.
- RFC 025: added `App\Jobs\SyncAudienceDemographics` queued job with `instagram-sync` queue configuration (`tries=3`) and delegated execution through `App\Services\Facebook\InstagramGraphService`.
- RFC 025: added demographics sync workflow in `app/Services/Facebook/InstagramGraphService.php` to fetch follower demographic insights, parse age/gender/city/country breakdowns (including `audience_gender_age` payloads), replace prior snapshot rows, and gracefully skip accounts with fewer than 100 followers.
- RFC 025: added feature coverage in `tests/Feature/Jobs/SyncAudienceDemographicsTest.php` for demographics parsing/persistence, snapshot replacement behavior, follower-threshold skip behavior, and queue configuration.
- RFC 024: added `App\Jobs\SyncInstagramStories` queued job with `instagram-sync` queue configuration (`tries=3`) and delegated execution through `App\Services\Facebook\InstagramGraphService`.
- RFC 024: added active story sync workflow in `app/Services/Facebook/InstagramGraphService.php` using idempotent `InstagramMedia::updateOrCreate` persistence with `media_type=story` and mapped story snapshot fields (`caption`, `permalink`, `media_url`, `thumbnail_url`, `published_at`).
- RFC 024: updated `app/Services/Facebook/Client.php` story retrieval to return normalized story payloads from Graph API media results and added feature coverage in `tests/Feature/Jobs/SyncInstagramStoriesTest.php` for creation, idempotent updates, and queue settings.
- RFC 023: added `App\Jobs\SyncMediaInsights` queued job with `instagram-sync` queue configuration (`tries=3`, `timeout=600`) and delegated execution through `App\Services\Facebook\InstagramGraphService`.
- RFC 023: added media insights sync workflow in `app/Services/Facebook/InstagramGraphService.php` to process non-story media from the last 90 days in chunks of 50 and persist `reach`, `impressions` (from `views`), `saved_count`, `shares_count`, and derived `engagement_rate`.
- RFC 023: updated insight metrics selection in `app/Enums/MediaType.php` and added feature coverage in `tests/Feature/Jobs/SyncMediaInsightsTest.php` for 90-day filtering, story exclusion, metric persistence/mapping, engagement-rate calculation, and queue settings.
- RFC 023: added `database/migrations/2026_02_12_193000_make_impressions_nullable_on_instagram_media_table.php` so `instagram_media.impressions` accepts nullable values when the insights payload omits `views`.
- RFC 021: added `App\Jobs\SyncInstagramProfile` queued job with `instagram-sync` queue configuration (`tries=3`, `backoff=[30,60,120]`) and profile sync persistence for `InstagramAccount` fields.
- RFC 021: added profile retrieval mapping in `app/Services/Facebook/InstagramGraphService.php` and extended `app/Services/Facebook/Client.php`.
- RFC 021: added typed Instagram profile sync exception handling with `App\Exceptions\InstagramApiException` and `App\Exceptions\InstagramTokenExpiredException`, including graceful token-expiry failure state updates and retryable API failure behavior.
- RFC 021: added feature coverage in `tests/Feature/Jobs/SyncInstagramProfileTest.php` for successful profile persistence, token-expiry failure handling, retryable API exception propagation, and job queue/backoff configuration.
- RFC 022: added `App\Jobs\SyncInstagramMedia` queued job with `instagram-sync` queue configuration (`tries=3`, `timeout=300`) and delegated execution through `App\Services\Facebook\InstagramGraphService`.
- RFC 022: added Instagram media retrieval/mapping flow via `app/Services/Facebook/InstagramGraphService.php` and `app/Services/Facebook/Client.php`, including pagination handling, API-to-enum media type mapping, and idempotent `InstagramMedia::updateOrCreate` persistence.
- RFC 022: added typed Instagram API error classes in `app/Exceptions/InstagramApiException.php` and `app/Exceptions/InstagramTokenExpiredException.php`, and feature coverage in `tests/Feature/Jobs/SyncInstagramMediaTest.php` for pagination sync behavior, media-type mapping, idempotent updates, and job queue settings.
- RFC 002: added backed string enums in `app/Enums/` for media, clients, proposals, invoices, scheduled posts, demographics, account type, and sync status.
- RFC 002: added unit coverage in `tests/Unit/EnumsTest.php` to verify enum cases and lowercase backed values.
- RFC 003: added `InstagramAccount` model with guarded attributes, enum/date/boolean/encrypted casts, and influencer/media/demographics relationships.
- RFC 003: added `InstagramAccountFactory` with default account generation plus `primary`, `business`, `creator`, and `tokenExpired` states.
- RFC 003: added influencer relationship helpers on `User` (`instagramAccounts`, `primaryInstagramAccount`) and seeded a default linked primary Instagram account.
- RFC 003: added feature coverage in `tests/Feature/Models/InstagramAccountTest.php` for factory defaults/states, encrypted token persistence, and relationship behavior.
- RFC 004: added `InstagramMedia` model with guarded attributes, enum/date/decimal casts, and `instagramAccount`/`clients` relationships.
- RFC 004: added `InstagramMediaFactory` with realistic default generation and `post`, `reel`, `story`, and `highEngagement` states.
- RFC 004: added feature coverage in `tests/Feature/Models/InstagramMediaTest.php` for default records, factory state behavior, and relationship wiring.
- RFC 005: added `AudienceDemographic` model with guarded attributes, enum/decimal/datetime casts, and `instagramAccount` relationship.
- RFC 005: added `AudienceDemographicFactory` with default demographic generation and `age`, `gender`, `city`, and `country` states.
- RFC 005: added feature coverage in `tests/Feature/Models/AudienceDemographicTest.php` for default records, state behavior, and relationship wiring.
- RFC 006: expanded `Client` model with casts and full influencer/portal/proposal/invoice/campaign-media relationships and added `User::clients()`.
- RFC 006: added `ClientFactory` with realistic defaults and `brand`/`individual` states.
- RFC 006: added feature coverage in `tests/Feature/Models/ClientTest.php` for default records, states, and relationship definitions.
- RFC 007: added `ClientUser` authenticatable model with factory trait, notifiable trait, fillable/hidden attributes, hashed password cast, and `client` relationship.
- RFC 007: added `ClientUserFactory` with default credential generation and automatic client linkage.
- RFC 007: added feature coverage in `tests/Feature/Models/ClientUserTest.php` for hashed password persistence, relationship wiring, and session guard authentication behavior.
- RFC 008: added `Proposal` model with guarded attributes, enum/datetime casts, and `user`/`client` relationships.
- RFC 008: added `ProposalFactory` with markdown defaults and `draft`, `sent`, `approved`, `rejected`, and `revised` states.
- RFC 008: added `User::proposals()` relationship for influencer proposal ownership.
- RFC 008: added feature coverage in `tests/Feature/Models/ProposalTest.php` for defaults, factory states, and relationship return types.
- RFC 009: added `Invoice` and `InvoiceItem` models with guarded attributes, required enum/date/decimal/datetime casts, and influencer/client/item relationships.
- RFC 009: added `Invoice::calculateTotals()` and automatic ID-based invoice numbering (uses the persisted invoice ID as `invoice_number`).
- RFC 009: added `InvoiceFactory` default/state generation (`draft`, `sent`, `paid`, `overdue`) and `InvoiceItemFactory` realistic line-item generation.
- RFC 009: added `User::invoices()` relationship for influencer-owned invoices.
- RFC 009: added feature coverage in `tests/Feature/Models/InvoiceTest.php` for factory defaults/states, relationship typing, totals calculation, and invoice numbering behavior.
- RFC 010: added `ScheduledPost` model with guarded attributes, required enum/datetime casts, and `user`/`client`/`instagramAccount` relationships.
- RFC 010: added `ScheduledPostFactory` with default planned future posts and `planned`, `published`, and `cancelled` states.
- RFC 010: added `User::scheduledPosts()` relationship for influencer-owned scheduled posts.
- RFC 010: added feature coverage in `tests/Feature/Models/ScheduledPostTest.php` for factory defaults/states, relationship typing, nullable client linkage, and user relationship behavior.
- RFC 011: configured `campaign_media` pivot relationships on `Client::instagramMedia()` and `InstagramMedia::clients()` with pivot fields and timestamps.
- RFC 011: added feature coverage in `tests/Feature/Models/CampaignMediaPivotTest.php` for pivot data access, timestamp tracking, and attach/detach behavior from both relationship sides.
- RFC 012: added model policies in `app/Policies/` for `InstagramAccount`, `Client`, `Proposal`, `Invoice`, `ScheduledPost`, and `InstagramMedia`.
- RFC 012: enforced ownership and workflow authorization rules including proposal send restrictions, draft-only invoice edits/deletes, and prevention of deleting a user's last Instagram account.
- RFC 012: added feature coverage in `tests/Feature/Authorization/ModelPoliciesTest.php` for policy auto-discovery, authorized/unauthorized outcomes across policy methods, and HTTP `403` responses for denied access.
- RFC 013: expanded influencer app navigation in `resources/views/layouts/app/sidebar.blade.php` with the Platform, Manage, and Instagram groups and all MVP placeholder links.
- RFC 013: updated `resources/views/layouts/app/header.blade.php` (desktop and mobile variants) to mirror the same RFC 013 navigation structure and removed starter external links.
- RFC 013: added feature coverage in `tests/Feature/NavigationStructureTest.php` to verify grouped navigation labels, dashboard route wiring, placeholder links, and removal of external links.
- RFC 014: added `docs/meta-app-setup.md` with end-to-end Meta Developer App setup, permissions, OAuth callback configuration, token lifecycle, app review guidance, and troubleshooting for Instagram Graph API onboarding.
- RFC 014: updated `.env.example` with `INSTAGRAM_CLIENT_ID`, `INSTAGRAM_CLIENT_SECRET`, and `INSTAGRAM_REDIRECT_URI` defaults required by Instagram OAuth configuration.
- RFC 015: added Instagram Socialite service configuration in `config/services.php` using `INSTAGRAM_CLIENT_ID`, `INSTAGRAM_CLIENT_SECRET`, and `INSTAGRAM_REDIRECT_URI`.
- RFC 015: registered the Socialite Providers Instagram listener in `app/Providers/AppServiceProvider.php` so `Socialite::driver('instagram')` resolves correctly.
- RFC 015: added feature coverage in `tests/Feature/Auth/InstagramSocialiteConfigurationTest.php` for listener registration and Instagram driver resolution.
- RFC 018: added a dedicated `client` auth guard, `clients` user provider, and `clients` password broker in `config/auth.php` for client-portal session isolation.
- RFC 018: added `routes/portal.php` with `guest:client` and `auth:client` middleware groups and loaded it from `routes/web.php`.
- RFC 018: added feature coverage in `tests/Feature/Auth/ClientGuardSetupTest.php` and updated `tests/Feature/Models/ClientUserTest.php` to validate real guard wiring and preserve `web` guard behavior.
- RFC 019: added `PortalAuthController` and `PortalLoginRequest` to implement client-guard login/logout workflows, validation, session regeneration, and auth failure handling for `/portal/login`.
- RFC 019: added `resources/views/pages/portal/login.blade.php` using the shared auth layout with client-portal-specific copy and only email/password login controls.
- RFC 019: added portal auth routes in `routes/portal.php` (`portal.login`, `portal.login.store`, `portal.logout`) and enforced a dedicated `client-portal-login` rate limit of 5 requests/minute per IP.
- RFC 019: added feature coverage in `tests/Feature/Auth/ClientPortalLoginTest.php` for login page rendering, successful/failed login, logout, rate limiting, and `web`/`client` guard isolation.
- RFC 014: added `docs/meta-app-setup.md` with end-to-end Meta Developer App setup, permissions, OAuth callback configuration, token lifecycle, app review guidance, and troubleshooting for Instagram Graph API onboarding.
- RFC 014: updated `.env.example` with `INSTAGRAM_CLIENT_ID`, `INSTAGRAM_CLIENT_SECRET`, and `INSTAGRAM_REDIRECT_URI` defaults required by Instagram OAuth configuration.
